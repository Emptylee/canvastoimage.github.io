(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAhCAYAAACGA8YfAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAAkxJREFUaIHtmsFx6jAQhj97OOpCBZ7xKyGUACWQEpQSoIRQQlQCr4TnEuISwowqyEUF5ICcpzHGkmLJgUz+k8Hyr+W3tLvapVBG18Ab06GkqJ68g4x+ANbAFnjo3T4BCmilqJqoySfwFnOJYOd5sYaG4ATspaj+jk6agLcMfHASlNFrzkKHGgpQA0dl9HNu3tJ+mQ32TR0nUOyU0bucvHOshB2wnMjxbH90Ft5FwMBNrJPqYeu5v5KiapXRR8/YLXDIwZt1JViPPfa2TlJUrb32Cf3p8VPz5t4OPn/zHsHlhr2kvCXT99UYUhrr2pmUd0GgCNaT9hORBmikqA7DTyVFrpe1DHGMtTL6lcssDM7xea2MlsCjsw/vCiE+4YVhAVx0CUjOrZUNKR1jDciEfLMhdXTwxe6bRGh0WElRFcDoYYbMKXguhKyExnF4PhGWA+ntzSN2O5yyWPHNWNgYHxrnQ5KQmjsTa5Z6wq3jVwR+RQBgoYz+x3h5qpGi2sxl0HegJO7E9SORQ4S7EzXWJ4QkQncpQk6jfdwxp04390jKGyJCVBosReUa60ualleuh5CNt8RfiKxtkwP8TY5+UaVlXOTaOWv4ahZt7zoZbwGgjH4jzQlw3y+12U7PRfPkC/jjrrKUvJ1j3Ccg65qefRyYfpY49LZZUt6i+2QLqVf7fgFYXasx2j7B6xd5ryZrqXg/Q6Rdxhvi1W0YEcByt8CKS5/hw34sW03FWwyNsI6w6/cPOcOG/+X2KAMc7qH/EcC5cNNybvUHh+8pvB/YFO6/SZPQKgAAAABJRU5ErkJggg=="},29:function(t,s,a){t.exports=a.p+"images/title_b-003.png"},5:function(t,s,a){},6:function(t,s,a){},67:function(t,s,a){"use strict";var e=a(5);a.n(e).a},68:function(t,s,a){"use strict";var e=a(6);a.n(e).a},69:function(t,s,a){"use strict";a.r(s);var e=a(1),i=[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tui"},[s("div",[this._v("把易讯宝推荐给朋友")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"banner"},[s("div",{staticClass:"banner_c"},[this._v("每邀请一位新用户注册您将获得"),s("img",{staticClass:"banner_count",attrs:{src:a(12)}}),this._v("体验金奖励")]),this._v(" "),s("div",{staticClass:"banner_c"},[this._v("新用户充值您将多获得"),s("img",{staticClass:"banner_count",attrs:{src:a(12)}}),this._v("体验金奖励")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"rule"},[a("div",{staticClass:"left"},[a("div",{staticClass:"left_c left_c1"},[t._v("1")]),t._v(" "),a("div",{staticClass:"left_c left_c2"},[t._v("2")]),t._v(" "),a("div",{staticClass:"left_c left_c3"},[t._v("3")])]),t._v(" "),a("div",{staticClass:"right"},[a("span",[t._v("点击生成分享图片")]),t._v(" "),a("span",[t._v("保存分享图片转发到微信/QQ群或者朋友圈")]),t._v(" "),a("span",[t._v("新用户扫码注册和充值您都将获得奖励")])])])}],o=a(26),n=a.n(o);let c="https://app.expay.vip/gateway";var r=new class{constructor(t=c){this.baseUrl=t,this.queue={}}getInsideConfig(t){return{baseURL:this.baseUrl,headers:{Authorization:t||""}}}interceptors(t){t.interceptors.request.use(t=>t,t=>Promise.error(t)),t.interceptors.response.use(t=>{const{data:s,status:a}=t;return{data:s,status:a}},t=>Promise.reject(t))}request(t,s){console.log("token",s);const a=n.a.create();return t=Object.assign(this.getInsideConfig(s),t),this.interceptors(a),a(t)}},l=a(27),v=a.n(l),_=a(11),h={name:"loading",props:{show1:{type:Boolean,default:!1}}},d=(a(67),a(7)),g={data:()=>({token:"",recommend:"",page_no:1,page_size:10,totalCount:0,finished:!1,list:[],showImg:!1,resultPic:"",show1:!1}),components:{Loading:Object(d.a)(h,function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.show1,expression:"show1"}],attrs:{id:"body"}},[this._m(0)])},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"loader"},[a("div",{staticClass:"loader_overlay"}),t._v(" "),a("div",{staticClass:"loader_cogs"},[a("div",{staticClass:"loader_cogs__top"},[a("div",{staticClass:"top_part"}),t._v(" "),a("div",{staticClass:"top_part"}),t._v(" "),a("div",{staticClass:"top_part"}),t._v(" "),a("div",{staticClass:"top_hole"})]),t._v(" "),a("div",{staticClass:"loader_cogs__left"},[a("div",{staticClass:"left_part"}),t._v(" "),a("div",{staticClass:"left_part"}),t._v(" "),a("div",{staticClass:"left_part"}),t._v(" "),a("div",{staticClass:"left_hole"})]),t._v(" "),a("div",{staticClass:"loader_cogs__bottom"},[a("div",{staticClass:"bottom_part"}),t._v(" "),a("div",{staticClass:"bottom_part"}),t._v(" "),a("div",{staticClass:"bottom_part"}),t._v(" "),a("div",{staticClass:"bottom_hole"})]),t._v(" "),a("p",[t._v("loading")])])])}],!1,null,"7292ea67",null).exports},created(){window.location.search.substring(1).split("&").map(t=>{let s=t.split("=");"token"==s[0]&&(this.token=s[1]),"recommend"==s[0]&&(this.recommend=s[1])})},mounted(){this.show1=!0,this.getData(),this.urlToImg(this.recommend).then(t=>{this.drawCanvas(t).then(t=>{this.convertCanvasToImage(t)})}).catch(t=>{console.log("报错",t),this.show1=!1,alert("暂时无法生成图片，请稍后再试~")})},methods:{getData(){r.request({url:"/user/recommend/getReward",method:"post",params:{pageNo:this.page_no,pageSize:this.page_size}},this.token).then(t=>{console.log(t);let s=t.data.data;console.log(s),this.totalCount=s.totalCount,this.list=this.list.concat(s.list),this.page_no==s.totalPage?this.finished=!0:this.page_no++}).catch(t=>{console.log(t)})},getMore(){this.getData()},convertCanvasToImage(t){var s=new Image;return this.resultPic=t.toDataURL("image/jpeg",1),console.log("resultPic",this.resultPic),this.show1=!1,s},drawCanvas:t=>new Promise((s,a)=>{var e=document.createElement("canvas");e.width=600,e.height=1068,e.style.width="300px",e.style.height="534px";var i=e.getContext("2d");i.scale(2,2);var o=new Image;o.onload=function(){i.drawImage(o,0,0,300,534),Object(_.setTimeout)(()=>{var a=new Image;a.onload=function(){i.drawImage(a,40,420,70,70),s(e)},a.setAttribute("crossOrigin","anonymous"),a.src=t},0)},o.setAttribute("crossOrigin","anonymous"),o.src="static/invitePost.jpg"}),urlToImg:t=>new Promise((s,a)=>{v.a.toDataURL("https://www.expay.vip/webapp/app.html?recommend="+t,{errorCorrectionLevel:"H",type:"image/jpg",rendererOpts:{quality:.93}},function(t,e){if(t)throw t;document.getElementById("qr_code").src=e,console.log(e),e?s(e):a("wrong")})}),createPic(){this.showImg=!0}}},p=(a(68),Object(d.a)(g,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app"},[e("div",{staticClass:"bg1"}),t._v(" "),e("div",{staticClass:"main"},[e("div",{staticClass:"btn_pic",on:{click:t.createPic}},[t._v("生成分享图片")]),t._v(" "),e("img",{staticClass:"title_b",attrs:{src:a(29),alt:""}}),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"invite"},[e("span",{staticClass:"num"},[t._v(t._s(t.totalCount))]),t._v(" "),e("span",{staticClass:"txt"},[t._v("邀请人数")])]),t._v(" "),e("div",{staticClass:"title_s"},[t._v("邀请攻略")]),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"title_s"},[t._v("我的邀请")]),t._v(" "),e("div",{staticClass:"list"},t._l(t.list,function(s,a){return e("div",{key:a,staticClass:"list_single"},[e("div",{staticClass:"left"},[e("span",[t._v("好友ID: "+t._s(s.beRecommendId))])]),t._v(" "),e("div",{staticClass:"right"},[e("span",[t._v(t._s(s.finishTime))])])])}),0),t._v(" "),t.finished?e("div",{staticClass:"else"},[t._v("加载完毕")]):e("div",{staticClass:"btn_more",on:{click:t.getMore}},[e("span",[t._v("查看更多")]),t._v(" "),e("div",{staticClass:"arrow"})]),t._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{width:"70px",height:"70px"},attrs:{id:"qr_code",src:"",alt:""}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showImg,expression:"showImg"}],staticClass:"coverage",attrs:{id:"coverage"}},[e("div",{staticClass:"coverage_mask",on:{click:function(s){t.showImg=!1}}}),t._v(" "),e("img",{staticClass:"result_pic",attrs:{src:t.resultPic,alt:""}})]),t._v(" "),e("canvas",{attrs:{id:"myCanvas"}}),t._v(" "),e("loading",{attrs:{show1:t.show1}})],1)},i,!1,null,null,null).exports),m=a(71);e.a.use(m.a),new e.a({render:t=>t(p)}).$mount("#app")}},[[69,1,2]]]);